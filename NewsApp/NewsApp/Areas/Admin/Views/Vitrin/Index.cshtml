@model IEnumerable<News>

<div class="row m-4">

    <p>Vitrindeki haberler</p>
    <div class="card-columns">
        @foreach (var news in Model.Where(n => n.NewsInSlide == true))
        {
            <div class="card">
                <img class="card-img-top" src="@news.NewsPhoto" alt="@news.NewsTitle">
                <div class="card-body">
                    <h5 class="card-title">@news.NewsTitle</h5>
                    <p class="card-text" style="overflow: hidden; text-overflow: ellipsis; max-height: 80px;min-height: 80px;">@news.NewsShortDescription</p>
                    <div class="form-check">
                        <button class="btn btn-danger deleteFromVitrin" data-newsid="@news.NewsID">Sil</button>
                    </div>
                </div>
            </div>
        }
    </div>

    <div class="pattern-divider"></div>
    <p>Diğer haberler</p>
    <div class="card-columns">
        @foreach (var news in Model.Where(n => n.NewsInSlide == false))
        {
            <div class="card">
                <img class="card-img-top" src="@news.NewsPhoto" alt="@news.NewsTitle">
                <div class="card-body">
                    <h5 class="card-title">@news.NewsTitle</h5>
                    <p class="card-text" style="overflow: hidden; text-overflow: ellipsis; max-height: 80px; min-height:80px;" >@news.NewsShortDescription</p>
                    <div class="form-check">
                        <button class="btn btn-success addToVitrin" data-newsid="@news.NewsID">Ekle</button>
                    </div>
                </div>
            </div>
        }
    </div>

</div>





@section Style
    {
    <link rel="stylesheet" href="~/adminlte-3.2.0/plugins/datatables-bs4/css/dataTables.bootstrap4.min.css">
    <link rel="stylesheet" href="~/adminlte-3.2.0/plugins/datatables-responsive/css/responsive.bootstrap4.min.css">
    <link rel="stylesheet" href="~/adminlte-3.2.0/plugins/datatables-buttons/css/buttons.bootstrap4.min.css">
}
@section Script
    {
    <script src="~/adminlte-3.2.0/plugins/datatables/jquery.dataTables.min.js"></script>
    <script src="~/adminlte-3.2.0/plugins/datatables-bs4/js/dataTables.bootstrap4.min.js"></script>
    <script src="~/adminlte-3.2.0/plugins/datatables-responsive/js/dataTables.responsive.min.js"></script>
    <script src="~/adminlte-3.2.0/plugins/datatables-responsive/js/responsive.bootstrap4.min.js"></script>
    <script src="~/adminlte-3.2.0/plugins/datatables-buttons/js/dataTables.buttons.min.js"></script>
    <script src="~/adminlte-3.2.0/plugins/datatables-buttons/js/buttons.bootstrap4.min.js"></script>
    <script src="~/adminlte-3.2.0/plugins/jszip/jszip.min.js"></script>
    <script src="~/adminlte-3.2.0/plugins/pdfmake/pdfmake.min.js"></script>
    <script src="~/adminlte-3.2.0/plugins/pdfmake/vfs_fonts.js"></script>
    <script src="~/adminlte-3.2.0/plugins/datatables-buttons/js/buttons.html5.min.js"></script>
    <script src="~/adminlte-3.2.0/plugins/datatables-buttons/js/buttons.print.min.js"></script>
    <script src="~/adminlte-3.2.0/plugins/datatables-buttons/js/buttons.colVis.min.js"></script>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>



    <script>
        $(document).ready(function () {
            // Haberi güncelle
            $(".deleteFromVitrin").click(function () {
                var selectedNewsId = $(this).data("newsid");

                $.ajax({
                    type: "POST",
                    url: "/Admin/Vitrin/UpdateNewsInSlide",
                    data: { newsId: selectedNewsId, newsInSlide: false },
                    success: function (response) {
                        // İşlem başarılı olduğunda yapılacak işlemler
                        location.reload();
                    },
                    error: function (error) {
                        // Hata durumunda yapılacak işlemler
                        alert("Hata oluştu: " + error.statusText);
                    }
                });
            });

            $(".addToVitrin").click(function () {
                var selectedNewsId = $(this).data("newsid");

                $.ajax({
                    type: "POST",
                    url: "/Admin/Vitrin/UpdateNewsInSlide",
                    data: { newsId: selectedNewsId, newsInSlide: true },
                    success: function (response) {
                        // İşlem başarılı olduğunda yapılacak işlemler
                        location.reload();
                    },
                    error: function (error) {
                        // Hata durumunda yapılacak işlemler
                        alert("Hata oluştu: " + error.statusText);
                    }
                });
            });
        });

        function truncateText(text, limit) {
    const words = text.split(' ');
    if (words.length > limit) {
        return words.slice(0, limit).join(' ') + '...';
    }
    return text;
}
    </script>

    }
<style>
    /* Desenli çizgiyi tanımla */
    .pattern-divider {
        width: 100%;
        height: 1px;
        background-image: repeating-linear-gradient(-45deg, transparent, transparent 5px, #ccc 5px, #ccc 10px);
        margin: 20px 0;
    }

    .card-img-top {
        object-fit: cover; /* Görüntüyü kartın boyutuna sığacak şekilde kapla */
        height: 200px; /* İstediğiniz yüksekliği ayarlayın */
    }


</style>